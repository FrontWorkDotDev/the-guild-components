import { useSSG } from 'nextra/ssg'
import { PackageCmd, fetchPackageInfo } from '@theguild/components'
import { MDXRemote } from 'next-mdx-remote'
import { compileMdx } from 'nextra/compile'

export const getStaticProps = async () => {
  const { readme } = await fetchPackageInfo('@envelop/core')
  const mdx = await compileMdx(readme.replaceAll('```console', '```'), {
    mdxOptions: {
      outputFormat: 'function-body',
      jsx: false
    }
  })
  return {
    props: {
      ssg: mdx.result
    },
    // Revalidate at most once every 1 hour
    revalidate: 60 * 60
  }
}

export const PackageApiDocs = () => {
  // Get the data from SSG, and render it as a component.
  const compiledSource = useSSG()
  return (
    <>
      <PackageCmd packages={['@envelop/core']} />
      <MDXRemote compiledSource={compiledSource} />
    </>
  )
}

# Remote MDX Support

<PackageApiDocs />
